# Roadmap（开发顺序 / 里程碑）

目标：**先跑通主流程，再补异常与体验**。任意阶段都保持“可运行、可验证”。

主链路：**图片表格 OCR → JSON → Excel → 在线编辑 → 下载**  
架构说明：`docs/03_architecture/architecture_overview.md`

---

## 总体原则

1. **后端优先，前端跟进**
2. **先主流程，后异常与体验**
3. **先不可逆链路（OCR/JSON/Excel），后编辑器细节**
4. 每一步都要有明确产出与验收标准

---

## 推荐推进顺序（可验证产出）

### Step 1：后端基础工程初始化

- **目标**：FastAPI 工程可启动，health 可用，数据库连通
- **验收**：服务启动成功；health 正常；DB 连接正常

### Step 2：任务模型与状态体系

- **目标**：建立 task 数据表与状态枚举，支持创建/查询/更新
- **验收**：可创建 task；状态可更新与查询

### Step 3：图片上传与本地存储

- **目标**：图片上传落盘并与任务绑定
- **验收**：图片存在；task 与图片关联正确；状态为 `uploaded`

### Step 4：OCR 接入（创建 job_id）

- **目标**：后端上传图片到 OCR 服务，获得 `ocr_job_id`
- **验收**：成功获取 job_id；写入 task；状态为 `ocr_processing`

### Step 5：任务状态获取 + 拉取 OCR JSON 落盘

- **目标**：跑通异步任务闭环（直到 finished/failed）
- **验收**：finished 后能获取并保存 OCR JSON；状态为 `ocr_done`

### Step 6：OCR JSON → Excel（多 Sheet）

- **目标**：基于 OCR JSON 生成初版 Excel（多表→多 Sheet）
- **验收**：Excel 可打开；Sheet 数量与识别表格数量一致；结构正确；状态为 `excel_generated`

### Step 7：Excel → 表格 JSON（供前端预览/编辑）

- **目标**：提供稳定的前端表格数据结构（多 Sheet）
- **验收**：接口返回结构完整、数据正确；状态为 `editable`

### Step 8：前端基础工程初始化 + 页面骨架

- **目标**：前端可运行，完成 UploadArea/ExcelArea 布局
- **验收**：页面可访问；基础布局可见

### Step 9：前端上传 + 状态展示

- **目标**：前端可创建任务并展示 OCR 状态变化
- **验收**：上传成功；状态自动刷新；失败可提示

### Step 10：前端表格预览（只读）+ 多 Sheet 切换

- **目标**：把“表格 JSON”稳定展示出来
- **验收**：多 Sheet 可切换；渲染正确

### Step 11：前端编辑 + 保存（表格 JSON → Excel）

- **目标**：编辑能力闭环（显式保存）
- **验收**：编辑后保存成功；下载 Excel 内容与最新保存一致

### Step 12：异常处理与稳定性优化

- **目标**：可上线的稳定性与可观测性
- **验收**：OCR/转换失败可感知；系统不崩溃；关键状态可追踪

